<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nicholas">
<meta name="dcterms.date" content="2025-11-11">
<meta name="description" content="I ask Gemini and ChatGPT to write a newspaper article, inspired by The AI Con.">

<title>Can AI replace journalists? – Nick’s Journey With LLMs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-8fd1faf6fd93e4e6d207ae0f9db51d78.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Nick’s Journey With LLMs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Can AI replace journalists?</h1>
                  <div>
        <div class="description">
          I ask Gemini and ChatGPT to write a newspaper article, inspired by The AI Con.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">Living with a Book</div>
                <div class="quarto-category">Politics</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Nicholas </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 11, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="journalismai.webp" class="img-fluid"></p>
<p>Chapter 5 of “The AI Con” discusses how journalism is at risk due to the rise of AI. The book reports how a smaller newspaper got caught using AI in one of its articles. This was a shocking and upsetting chapter. The field of journalism is already at risk because of news deserts. It is hard to get a job as a journalist, so the rise of AI might completely eradicate the field. I wanted to test if AI can actually replace the field of journalism, so I asked Gemini and ChatGPT to write an article reporting on the government shutdown.</p>
<p>This is the prompt I gave to both ChatGPT and Gemini: <strong>Write a newspaper article updating the American public about the government shutdown. Including sourcing and interviews to enhance the reporting of the article.</strong></p>
<p>This is how my conversation with ChatGPT went:</p>
<section id="user" class="level3">
<h3 class="anchored" data-anchor-id="user">USER</h3>
<p>Write a newspaper article updating the American public about the government shutdown. Including sourcing and interviews to enhance the reporting of the article.</p>
</section>
<section id="assistant" class="level3">
<h3 class="anchored" data-anchor-id="assistant">ASSISTANT</h3>
<p><strong>Title: Government Shuts Down Amid Budget Impasse: Services Halt, Workers Furloughed</strong></p>
<p><em>By Emily Rodriguez, Washington Bureau Chief</em><br>
<em>Published: October 2, 2024</em></p>
<p><strong>WASHINGTON, D.C.</strong> — The U.S. federal government officially entered a shutdown at midnight on Tuesday after Congress failed to pass a funding bill. The impasse, driven by deep divisions over spending levels and policy riders, has immediately impacted hundreds of thousands of federal workers and the delivery of public services nationwide.</p>
<p><strong>The Impasse</strong></p>
<p>Despite weeks of negotiations, lawmakers were unable to reconcile differences between a House-passed conservative spending plan championed by the Freedom Caucus and a bipartisan Senate bill that favored more moderate funding levels.</p>
<p>“The American people deserve a government that works, not one forced into chaos by extremist factions,” said Senate Majority Leader Chuck Schumer (D-NY) in a speech from the Senate floor shortly after the shutdown deadline passed. “We presented a compromise, but some in the House refused to move an inch.”</p>
<p>House Speaker Mike Johnson (R-LA), facing pressure from hardline conservatives, countered that the House proposal focused on “prioritizing fiscal responsibility” and “restoring accountability.”</p>
<p>“I will not be strong-armed into accepting a bloated budget that drives us further into debt,” Johnson said during a press conference. “We must protect taxpayer dollars.”</p>
<p><strong>Who’s Affected</strong></p>
<p>With the shutdown in effect, an estimated 800,000 federal workers face immediate furlough or work without pay. Government agencies such as the Environmental Protection Agency, National Park Service, and portions of the Department of Education have ceased non-essential operations.</p>
<p>Miriam Thompson, a park ranger stationed in Yellowstone National Park, received her furlough notice via email late Tuesday. Speaking with <em>The American Ledger</em>, she said, “It’s heartbreaking. The past few months have already been tight with inflation, and now I don’t know how I’ll pay rent next month.”</p>
<p>Worries are growing about the broader economic impact. Federal contractors are also bracing for delays and potential cancellation of projects.</p>
<p><strong>Services at Risk</strong></p>
<p>While Social Security checks and other mandatory programs will continue, many government services are now suspended:</p>
<ul>
<li>National parks are closed or have limited access.</li>
<li>Passport and visa processing could face significant delays.</li>
<li>Small Business Administration loan approvals are paused.</li>
<li>Updates from federal agencies, including the Centers for Disease Control and Prevention, may be limited.</li>
</ul>
<p>Air travel may also experience disruptions as Transportation Security Administration (TSA) agents and air traffic controllers are working without pay.</p>
<p><strong>Public Response and Outlook</strong></p>
<p>A recent Pew Research poll conducted in the days leading up to the shutdown found that 62% of Americans blame “both parties” for government gridlock, while 27% blamed Republicans more specifically and 11% blamed Democrats.</p>
<p>In a visit to a D.C. food pantry, President Biden criticized House Republicans for “manufacturing a crisis.”</p>
<p>“This shutdown didn’t have to happen. I’m calling on Speaker Johnson and House Republicans to live up to their responsibilities to the American people,” Biden said.</p>
<p>Some lawmakers are attempting to find a short-term solution. Senator Joe Manchin (D-WV) is reportedly leading a bipartisan group working on a continuing resolution (CR) to fund the government for another 30 days while negotiations continue.</p>
<p>In an interview with <em>The American Ledger</em>, Manchin said, “We have a duty to the American people to keep the lights on. We’re working day and night to broker a compromise.”</p>
<p><strong>Next Steps</strong></p>
<p>Negotiations resumed Wednesday morning behind closed doors. Analysts warn that every day the government remains closed could further damage public trust and the economy.</p>
<p>Historian Dr.&nbsp;Eliza Marques of Georgetown University offered context: “The longer this continues, the more it erodes the foundations of governance. Federal workers, essential services, markets—they all take hits. It’s not just political theatre; it’s real consequences for real people.”</p>
<p>With the clock ticking and tempers flaring on Capitol Hill, Americans across the country wait anxiously for a resolution to the latest chapter in Washington’s ongoing fiscal battles.</p>
<hr>
<p><strong>Have you been affected by the shutdown? Share your story with us at tips@americanledger.com.</strong></p>
<p><strong><em>Reflection</em></strong></p>
<p>This article was interesting to unpack. I could not find the quotes in this article to be reported by other news organizations, so I am assuming that ChatGPT made them up. The structure of the article was similar to most news articles, with a lede, strong headline, and short paragraphs. I was also very fascinated to see that ChatGPT created its own journalistic name, Emily Rodriguez, which I could not find online. The article is using information from October 2, so the information is not up to date. This makes me believe that AI can not replace journalism because AI is not fast enough to report on breaking news content. Additionally, it was interesting to see that ChatGPT also claimed this article as part of the AmericanLedger and even provided an email.</p>
<p>This is how my conversation with Gemini went:</p>
</section>
<section id="user-1" class="level3">
<h3 class="anchored" data-anchor-id="user-1">USER</h3>
<p>Write a newspaper article updating the American public about the government shutdown. Including sourcing and interviews to enhance the reporting of the article.</p>
</section>
<section id="assistant-1" class="level3">
<h3 class="anchored" data-anchor-id="assistant-1">ASSISTANT</h3>
</section>
<section id="government-shutdown-drags-into-second-week-as-stalemate-deepens-public-feels-growing-pinch" class="level2">
<h2 class="anchored" data-anchor-id="government-shutdown-drags-into-second-week-as-stalemate-deepens-public-feels-growing-pinch">Government Shutdown Drags into Second Week as Stalemate Deepens, Public Feels Growing Pinch</h2>
<p><strong>WASHINGTON D.C. – October 11, 2023</strong> – The United States federal government remains partially shut down, entering its second week today, as congressional leaders and the White House continue to clash over federal spending, leaving hundreds of thousands of federal employees furloughed and critical services suspended or curtailed nationwide.</p>
<p>The impasse began on October 1st, the start of the new fiscal year, when Congress failed to pass the necessary appropriations bills to fund government operations. At the heart of the dispute are deep disagreements over overall spending levels, with House Republicans pushing for significant cuts and specific policy riders, while the Democratic-controlled Senate and the White House advocate for higher spending on social programs and maintain current funding levels for most agencies.</p>
<p>“This is an unacceptable failure of leadership that is hurting real American families and undermining our national security,” stated <strong>President Evelyn Thompson</strong> during a press conference on Tuesday. “My administration has offered multiple pathways to compromise, but House Republicans continue to prioritize extreme demands over the well-being of the American people.”</p>
<p>However, <strong>Speaker of the House Robert Maxwell (R-GA)</strong> countered, “We were elected to rein in out-of-control spending and address the nation’s burgeoning debt. The President and Senate Democrats refuse to negotiate in good faith on responsible fiscal policy. We will not pass a blank check that further burdens future generations.”</p>
<p><strong>Impact Ripples Across the Nation</strong></p>
<p>The effects of the shutdown are becoming increasingly visible and impactful. National parks and monuments are largely closed, leading to a loss of tourism revenue and access for visitors. Agencies deemed “non-essential,” such as the Environmental Protection Agency (EPA), the Department of Education, and parts of the Department of Commerce, are operating with skeleton crews or are entirely shuttered.</p>
<p><strong>Sarah Chen, a 38-year-old EPA scientist</strong> based in Raleigh, North Carolina, expressed her frustration. “I’m furloughed indefinitely. My family relies on my income, and suddenly it’s just gone. We have bills, a mortgage, and two young kids. It feels like we’re just pawns in a political game.” Chen, who has worked for the EPA for 12 years, added, “Beyond the personal stress, critical environmental monitoring and research are on hold. The long-term consequences of this are real.”</p>
<p>Small businesses that rely on federal contracts or tourism are also feeling the squeeze. <strong>Mark Johnson, owner of “Capitol Grind,” a coffee shop near a federal office building in Washington D.C.</strong>, reported a significant drop in sales. “My morning rush is maybe a third of what it usually is,” Johnson said, wiping down an empty counter. “Many of my regular customers are federal workers. If they’re not coming in, they’re not buying coffee, and I’m losing money. This can’t go on much longer.”</p>
<p>Even services deemed “essential,” such as air traffic control, border protection, and some healthcare functions, are operating with employees working without pay, creating significant morale issues and potential long-term staffing challenges. The Department of Veterans Affairs (VA) is largely funded, but some services, like benefit processing, could face delays if the shutdown persists.</p>
<p><strong>Negotiations at a Standstill</strong></p>
<p>Behind the scenes, negotiations appear to be gridlocked. Sources close to the discussions indicate that a key sticking point remains the funding levels for border security and specific social programs. House Republicans are pushing for significant cuts to non-defense discretionary spending and an increase in funding for border enforcement, while Democrats are resisting these cuts and advocating for maintaining current levels for social safety nets and domestic programs.</p>
<p><strong>Senator Elena Rodriguez (D-CA), a member of the Senate Appropriations Committee</strong>, voiced her exasperation. “We have a bipartisan bill that passed the Senate with strong support. It’s time for the House to stop playing political games and bring that bill to a vote, or at least come to the table with realistic proposals.”</p>
<p>Meanwhile, <strong>Dr.&nbsp;Emily Hayes, a political science professor at Georgetown University</strong>, offered her analysis. “This shutdown is a classic example of divided government at its most dysfunctional. Neither side wants to be seen as ‘caving’ to the other, especially with an election year looming. The longer it goes on, the more pressure builds, but that pressure also hardens positions.” Hayes warned, “The economic impact, though not catastrophic yet, grows daily. Consumer confidence will erode, and the ripple effect on various sectors of the economy will become more pronounced.”</p>
<p>There is no clear indication of when a resolution might be reached. Both sides remain entrenched in their positions, leaving the American public to bear the brunt of the political impasse. Federal employees await their next paycheck with bated breath, and vital government functions remain in limbo, underscoring the real-world consequences of Washington’s gridlock.</p>
<hr>
<p><em>By Alex Rivera, Staff Writer</em></p>
<p><strong><em>Reflection</em></strong></p>
<p>Similarly, this was also an interesting article to unpack. This article was not structured that well since the paragraphs were longer than typical news articles. I could not find the quotes online, so I am again assuming that the AI made up these quotes. Gemini also made a large mistake in the article, claiming that the Senate is controlled by Democrats when there is a Republican majority. It was interesting to see Gemini write the article under the name Alex Rivera, who also did not exist according to my Google search. Both of these articles show that, while “The AI Con” emphasizes that journalism is at risk because of AI, I disagree because these aticles are not impressive.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/nmaharaj28\.github\.io\/comm4190_F25_Using_LLMs_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>